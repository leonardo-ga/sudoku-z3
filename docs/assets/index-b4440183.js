(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const u=document.getElementById("board"),A=document.getElementById("difficulty"),S=document.getElementById("newBtn"),N=document.getElementById("solveBtn"),P=document.getElementById("checkBtn"),D=document.getElementById("hintBtn"),O=document.getElementById("undoBtn"),T=document.getElementById("numpad"),W=document.getElementById("time"),k=document.getElementById("mistakes"),j=document.getElementById("statusMsg");let v=new Array(81).fill(0),s=new Array(81).fill(0),g=new Array(81).fill(!1),f=-1,y=0,L=null,M=null,E=[];for(let e=0;e<81;e++){const t=document.createElement("div");t.className="cell",t.dataset.index=e;const n=document.createElement("input");n.type="text",n.maxLength=1,n.inputMode="numeric",n.pattern="[1-9]",n.autocomplete="off",t.appendChild(n),u.appendChild(t),t.addEventListener("click",i=>{f!==-1&&u.children[f].classList.remove("highlight"),f=e,t.classList.add("highlight"),n.focus()}),n.addEventListener("input",i=>{const r=n.value.replace(/[^1-9]/g,"");n.value=r;const l=parseInt(t.dataset.index);if(g[l]){n.value="";return}const o=s[l],c=r?parseInt(r):0;o!==c&&E.push({idx:l,prev:o}),s[l]=c,h(),c&&v[l]!==c?(y++,k.textContent=y,t.classList.add("conflict"),a("Wrong number")):(t.classList.remove("conflict"),a("")),w()}),n.addEventListener("keydown",i=>{if(i.key==="Backspace"||i.key==="Delete"){const r=parseInt(t.dataset.index);if(g[r]){i.preventDefault();return}E.push({idx:r,prev:s[r]}),s[r]=0,n.value="",h()}})}(function(){for(let t=0;t<9;t++)for(let n=0;n<9;n++){const i=t*9+n,r=u.children[i],l=[];n%3===0&&l.push("border-left:2px solid rgba(255,255,255,0.06)"),t%3===0&&l.push("border-top:2px solid rgba(255,255,255,0.06)"),n===8&&l.push("border-right:2px solid rgba(255,255,255,0.06)"),t===8&&l.push("border-bottom:2px solid rgba(255,255,255,0.06)"),r.style.cssText+=";"+l.join(";")}})();function z(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function U(){const e=new Array(81).fill(0),t=Array.from({length:9},()=>new Set),n=Array.from({length:9},()=>new Set),i=Array.from({length:9},()=>new Set);function r(o,c){return Math.floor(o/3)*3+Math.floor(c/3)}function l(o){if(o===81)return!0;const c=Math.floor(o/9),d=o%9,b=z([1,2,3,4,5,6,7,8,9]);for(const m of b)if(!(t[c].has(m)||n[d].has(m)||i[r(c,d)].has(m))){if(e[o]=m,t[c].add(m),n[d].add(m),i[r(c,d)].add(m),l(o+1))return!0;e[o]=0,t[c].delete(m),n[d].delete(m),i[r(c,d)].delete(m)}return!1}return l(0),e}function H(e){const t=e.slice();function n(){for(let o=0;o<81;o++)if(t[o]===0)return o;return-1}function i(o,c){const d=Math.floor(o/9),b=o%9,m=Math.floor(d/3),I=Math.floor(b/3);for(let p=0;p<9;p++)if(t[d*9+p]===c||t[p*9+b]===c)return!1;for(let p=m*3;p<m*3+3;p++)for(let B=I*3;B<I*3+3;B++)if(t[p*9+B]===c)return!1;return!0}function r(){const o=n();if(o===-1)return!0;for(let c=1;c<=9;c++)if(i(o,c)){if(t[o]=c,r())return!0;t[o]=0}return!1}return r()?t:null}function R(e,t){const n=e.slice(),i=z(Array.from({length:81},(l,o)=>o));let r=0;for(const l of i){if(r>=t)break;const o=n[l];if(n[l]=0,!H(n)){n[l]=o;continue}r++}return n}function x(){for(let e=0;e<81;e++){const t=u.children[e],n=t.firstElementChild;g[e]?(t.classList.add("prefilled"),n.value=s[e]||"",n.disabled=!0,n.style.fontWeight="700"):(t.classList.remove("prefilled"),n.disabled=!1,n.value=s[e]||""),t.classList.remove("conflict")}h()}function h(){for(let e=0;e<81;e++)u.children[e].classList.remove("conflict");for(let e=0;e<81;e++){const t=s[e];if(!t)continue;const n=Math.floor(e/9),i=e%9,r=Math.floor(n/3),l=Math.floor(i/3);for(let o=0;o<9;o++){const c=n*9+o;c!==e&&s[c]===t&&u.children[e].classList.add("conflict");const d=o*9+i;d!==e&&s[d]===t&&u.children[e].classList.add("conflict")}for(let o=r*3;o<r*3+3;o++)for(let c=l*3;c<l*3+3;c++){const d=o*9+c;d!==e&&s[d]===t&&u.children[e].classList.add("conflict")}}}function a(e){j.textContent=e||""}function w(){s.every((e,t)=>e!==0&&e===v[t])&&(a("ðŸŽ‰ Puzzle complete â€” well done!"),clearInterval(L),L=null)}function q(){clearInterval(L),M=Date.now(),L=setInterval(()=>{const e=Math.floor((Date.now()-M)/1e3),t=String(Math.floor(e/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");W.textContent=t+":"+n},250)}function C(){const e=parseInt(A.value,10);a("Generating puzzle...");const t=U();v=t.slice();const n=R(t,e);s=n.slice(),g=n.map(i=>i!==0),y=0,k.textContent="0",E=[],x(),q(),a("New puzzle â€” good luck!")}function F(){s=v.slice(),x(),h(),a("Solution revealed"),clearInterval(L),L=null}function G(){const e=[];for(let n=0;n<81;n++)(s[n]===0||s[n]!==v[n])&&e.push(n);if(e.length===0){a("No hints â€” puzzle seems complete");return}const t=e[Math.floor(Math.random()*e.length)];E.push({idx:t,prev:s[t]}),s[t]=v[t],g[t]=!1,x(),h(),w(),a("Hint revealed")}function K(){const e=E.pop();if(!e){a("Nothing to undo");return}s[e.idx]=e.prev,x(),h(),a("Undo")}for(let e=1;e<=9;e++){const t=document.createElement("div");t.className="num-btn",t.textContent=e,t.dataset.num=e,t.addEventListener("click",()=>{if(f===-1){a("Select a cell first");return}const n=u.children[f],i=f;if(g[i]){a("Cell is locked");return}const r=s[i];E.push({idx:i,prev:r}),s[i]=e,n.firstElementChild.value=e,h(),v[i]!==e?(y++,k.textContent=y,n.classList.add("conflict"),a("Wrong number")):(n.classList.remove("conflict"),a("")),w()}),T.appendChild(t)}S.addEventListener("click",C);N.addEventListener("click",()=>{confirm("Reveal full solution?")&&F()});P.addEventListener("click",()=>{h(),[...u.children].filter(t=>t.classList.contains("conflict")).length?a("There are conflicts â€” red cells are wrong."):a("No conflicts found.")});D.addEventListener("click",G);O.addEventListener("click",K);window.addEventListener("keydown",e=>{if(document.activeElement&&document.activeElement.tagName==="INPUT")return;if(e.key>="1"&&e.key<="9"){if(f===-1)return;const n=f;if(g[n])return;E.push({idx:n,prev:s[n]}),s[n]=parseInt(e.key),u.children[n].firstElementChild.value=e.key,h(),v[n]!==s[n]&&(y++,k.textContent=y,u.children[n].classList.add("conflict")),w()}const t={ArrowLeft:-1,ArrowRight:1,ArrowUp:-9,ArrowDown:9};if(t[e.key]&&f!==-1){e.preventDefault();const n=f+t[e.key];n>=0&&n<81&&(f!==-1&&u.children[f].classList.remove("highlight"),f=n,u.children[f].classList.add("highlight"))}});C();
//# sourceMappingURL=index-b4440183.js.map
